# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç RAG –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å—É–¥–µ–±–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏

## –ó–∞ 5 –º–∏–Ω—É—Ç –¥–æ –ø–µ—Ä–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Qdrant (Docker)

```bash
docker run -d -p 6333:6333 -p 6334:6334 \
    -v $(pwd)/qdrant_storage:/qdrant/storage:z \
    qdrant/qdrant
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env

–î–æ–±–∞–≤—å—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```env
RAG_ENABLED=true
RAG_QDRANT_URL=http://localhost:6333
RAG_COLLECTION=judicial_practice
```

### 3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
python scripts/load_judicial_practice.py --input data/judicial_cases_example.jsonl
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

```bash
python -m src.core.main_simple
```

### 5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –ù–∞–∂–º–∏—Ç–µ **üîç –ü–æ–∏—Å–∫ —Å—É–¥–µ–±–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏**
3. –°–ø—Ä–æ—Å–∏—Ç–µ: "–ù–∞–π–¥–∏ –ø—Ä–∞–∫—Ç–∏–∫—É –ø–æ –≤–∑—ã—Å–∫–∞–Ω–∏—é –Ω–µ—É—Å—Ç–æ–π–∫–∏ —Å –∑–∞—Å—Ç—Ä–æ–π—â–∏–∫–∞"

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–∏ –¥–µ–ª–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `data/my_cases.jsonl`:

```jsonl
{"text": "–¢–µ–∫—Å—Ç —Ä–µ—à–µ–Ω–∏—è...", "case_number": "–ê40-12345/2023", "court": "–ê–° –ú–æ—Å–∫–≤—ã", "date": "2023-10-15", "url": "https://sudact.ru/..."}
{"text": "–¢–µ–∫—Å—Ç —Ä–µ—à–µ–Ω–∏—è...", "case_number": "–ê56-78901/2023", "court": "–ê–° –°–ü–±", "date": "2023-09-20"}
```

–ó–∞–≥—Ä—É–∑–∏—Ç–µ:

```bash
python scripts/load_judicial_practice.py --input data/my_cases.jsonl
```

### –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ–∏—Å–∫–∞

```env
RAG_TOP_K=10                    # –ë–æ–ª—å—à–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
RAG_SCORE_THRESHOLD=0.75        # –í—ã—à–µ –ø–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
RAG_CONTEXT_CHAR_LIMIT=8000     # –ë–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Qdrant Cloud

```env
RAG_QDRANT_URL=https://your-cluster.cloud.qdrant.io
RAG_QDRANT_API_KEY=your-api-key
```

## –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. `docs/RAG_SETUP.md` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### Qdrant –∑–∞–ø—É—â–µ–Ω?

```bash
curl http://localhost:6333/collections
```

### –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã?

```bash
curl http://localhost:6333/collections/judicial_practice
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ (points_count).

## Troubleshooting

**RAG –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –¥–µ–ª–∞** ‚Üí –°–Ω–∏–∑—å—Ç–µ `RAG_SCORE_THRESHOLD` –¥–æ 0.5 –∏–ª–∏ —É–±–µ—Ä–∏—Ç–µ —Å–æ–≤—Å–µ–º

**–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Qdrant** ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `docker ps` –∏ `RAG_QDRANT_URL`

**–î–æ–ª–≥–∏–π –ø–æ–∏—Å–∫** ‚Üí –£–º–µ–Ω—å—à–∏—Ç–µ `RAG_TOP_K` –¥–æ 3-5
